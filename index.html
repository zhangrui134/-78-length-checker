<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>78é•¿åº¦æŸ¥è¯¢å™¨</title>
    <meta name="description" content="æµ‹è¯•ä½ çš„78é•¿åº¦ï¼ŒæŸ¥çœ‹å®æ—¶æ’è¡Œæ¦œï¼Œå’Œæœ‹å‹ä¸€èµ·ç©ï¼">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Microsoft YaHei', sans-serif;
            -webkit-tap-highlight-color: transparent;
        }
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            -webkit-overflow-scrolling: touch;
        }
        .container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            max-width: 500px;
            margin: 0 auto;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        h1 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 28px;
            text-align: center;
        }
        .subtitle {
            color: #7f8c8d;
            margin-bottom: 30px;
            font-size: 16px;
            text-align: center;
        }
        .input-group {
            margin-bottom: 20px;
            text-align: left;
        }
        label {
            display: block;
            margin-bottom: 8px;
            color: #2c3e50;
            font-weight: bold;
        }
        .input-hint {
            font-size: 12px;
            color: #7f8c8d;
            margin-top: 4px;
        }
        .name-available {
            color: #27ae60;
            font-size: 12px;
            margin-top: 4px;
            font-weight: bold;
        }
        .name-taken {
            color: #e74c3c;
            font-size: 12px;
            margin-top: 4px;
            font-weight: bold;
        }
        .name-checking {
            color: #f39c12;
            font-size: 12px;
            margin-top: 4px;
            font-weight: bold;
        }
        input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 16px;
            margin-bottom: 10px;
            -webkit-appearance: none;
            transition: all 0.3s ease;
        }
        input:focus {
            outline: none;
            border-color: #3498db;
        }
        button {
            width: 100%;
            padding: 16px;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            margin-bottom: 12px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        button:active {
            transform: scale(0.98);
        }
        .query-btn {
            background: #e74c3c;
        }
        .ranking-btn {
            background: #3498db;
        }
        .refresh-btn {
            background: #27ae60;
        }
        .share-btn {
            background: #9b59b6;
        }
        .result-box {
            margin-top: 25px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 15px;
            text-align: center;
        }
        .length-result {
            font-size: 48px;
            font-weight: bold;
            color: #e74c3c;
            margin: 10px 0;
        }
        .unit {
            font-size: 18px;
            color: #7f8c8d;
            margin-bottom: 10px;
        }
        .size-tip {
            font-size: 16px;
            font-weight: bold;
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
        }
        .tip-small {
            background: #e8f6f3;
            color: #27ae60;
            border: 2px solid #27ae60;
        }
        .tip-medium {
            background: #fff3cd;
            color: #f39c12;
            border: 2px solid #f39c12;
        }
        .tip-large {
            background: #fde8e8;
            color: #e74c3c;
            border: 2px solid #e74c3c;
        }
        .tip-error {
            background: #ffeaa7;
            color: #e74c3c;
            border: 2px solid #e74c3c;
        }
        .ranking-section {
            margin-top: 40px;
            padding-top: 30px;
            border-top: 2px solid #e9ecef;
        }
        .ranking-horizontal {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        .rank-card {
            background: white;
            border-radius: 15px;
            padding: 15px;
            text-align: center;
            min-width: 120px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border: 3px solid #ddd;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .rank-card:active {
            transform: scale(0.95);
        }
        .rank-1 {
            border-color: #FFD700;
            background: linear-gradient(135deg, #FFD700, #FFEC8B);
        }
        .rank-2 {
            border-color: #C0C0C0;
            background: linear-gradient(135deg, #C0C0C0, #E8E8E8);
        }
        .rank-3 {
            border-color: #CD7F32;
            background: linear-gradient(135deg, #CD7F32, #E8B886);
            color: white;
        }
        .rank-medal {
            font-size: 24px;
            margin-bottom: 5px;
        }
        .rank-number {
            font-size: 14px;
            color: #7f8c8d;
            margin-bottom: 5px;
        }
        .player-name {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 5px;
            word-break: break-all;
        }
        .player-score {
            font-size: 18px;
            font-weight: bold;
            color: #e74c3c;
        }
        .stats {
            text-align: center;
            margin: 15px 0;
            padding: 10px;
            background: #e8f6f3;
            border-radius: 8px;
            font-size: 16px;
        }
        .back-to-top {
            text-align: center;
            margin-top: 20px;
        }
        .back-to-top a {
            color: #3498db;
            text-decoration: none;
            font-size: 16px;
            padding: 10px 20px;
            display: inline-block;
        }
        .share-section {
            text-align: center;
            margin-top: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 12px;
        }

        /* æ‰‹æœºä¼˜åŒ– */
        @media (max-width: 480px) {
            body {
                padding: 15px;
            }
            .container {
                padding: 20px;
            }
            h1 {
                font-size: 24px;
            }
            .length-result {
                font-size: 42px;
            }
            .rank-card {
                min-width: 110px;
                padding: 12px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- è®¡ç®—åŒºåŸŸ -->
        <h1>78é•¿åº¦æŸ¥è¯¢å™¨</h1>
        <div class="subtitle">æµ‹è¯•ä½ çš„78é•¿åº¦å¹¶æŸ¥çœ‹æ’è¡Œæ¦œ</div>
        
        <div class="input-group">
            <label>ç”¨æˆ·åï¼š</label>
            <input type="text" id="username" 
                   placeholder="è¯·è¾“å…¥çœŸå®å§“å(2-10ä¸ªå­—ç¬¦)" 
                   maxlength="10"
                   required
                   oninput="validateNameInput(this)">
            <div class="input-hint">åªèƒ½è¾“å…¥ä¸­æ–‡ã€è‹±æ–‡ã€æ•°å­—ï¼Œä¸èƒ½åŒ…å«ç‰¹æ®Šç¬¦å·</div>
            <div id="nameStatus"></div>
        </div>
        
        <div class="input-group">
            <label>èº«é«˜ï¼ˆcmï¼‰ï¼š</label>
            <input type="number" id="height" placeholder="è¯·è¾“å…¥èº«é«˜(100-250cm)" min="100" max="250" pattern="[0-9]*" inputmode="numeric" required>
            <div class="input-hint">è¯·è¾“å…¥100-250ä¹‹é—´çš„æ•°å­—</div>
        </div>
        
        <button class="query-btn" onclick="calculateAndSave()">
            ğŸ“ å¼€å§‹æŸ¥è¯¢å¹¶ä¿å­˜
        </button>
        
        <button class="ranking-btn" onclick="scrollToRanking()">
            ğŸ† æŸ¥çœ‹æ’è¡Œæ¦œ
        </button>
        
        <div class="result-box">
            <h3>æŸ¥è¯¢ç»“æœ</h3>
            <div class="length-result" id="lengthDisplay">0.00</div>
            <div class="unit">å˜ç±³</div>
            <div id="sizeTip" class="size-tip"></div>
            <div id="rankInfo" style="margin-top: 10px;"></div>
        </div>

        <!-- åˆ†äº«åŒºåŸŸ -->
        <div class="share-section">
            <h4>åˆ†äº«ç»™æœ‹å‹</h4>
            <button class="share-btn" onclick="shareApp()">
                ğŸ“± åˆ†äº«é“¾æ¥
            </button>
        </div>

        <!-- æ’è¡Œæ¦œåŒºåŸŸ -->
        <div class="ranking-section" id="rankingSection">
            <h2 style="text-align:center; color:#2c3e50; margin-bottom:20px;">ğŸ† å¥½å‹æ’è¡Œæ¦œ</h2>
            
            <button class="refresh-btn" onclick="loadRanking()">
                ğŸ”„ åˆ·æ–°æ’è¡Œæ¦œ
            </button>
            
            <div class="stats" id="stats">
                åŠ è½½ä¸­...
            </div>
            
            <div class="ranking-horizontal" id="rankingList">
                æ­£åœ¨åŠ è½½æ’è¡Œæ¦œæ•°æ®...
            </div>
            
            <div class="back-to-top">
                <a href="#" onclick="scrollToTop()">â†‘ è¿”å›é¡¶éƒ¨</a>
            </div>
        </div>
    </div>

    <script>
        const SUPABASE_URL = 'https://ryecnwmicmondyefflgb.supabase.co';
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ5ZWNud21pY21vbmR5ZWZmbGdiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMyMDUxMDQsImV4cCI6MjA3ODc4MTEwNH0.xzspaXXU3ee-mWuoUA2VPA2k2n6oyXldU-B651fK5sc';
        
        let usernameCheckTimeout;

        // ä¸¥æ ¼çš„äººåéªŒè¯
        function validateRealName(name) {
            // åŸºç¡€éªŒè¯ï¼šä¸­æ–‡ã€è‹±æ–‡ã€æ•°å­—ï¼Œ2-10å­—ç¬¦
            const basicRegex = /^[\u4e00-\u9fa5a-zA-Z0-9]{2,10}$/;
            if (!basicRegex.test(name)) {
                return { valid: false, message: 'ç”¨æˆ·ååªèƒ½åŒ…å«ä¸­æ–‡ã€è‹±æ–‡ã€æ•°å­—ï¼Œé•¿åº¦2-10ä¸ªå­—ç¬¦' };
            }
            
            // é˜²æ­¢æ— æ„ä¹‰é‡å¤å­—ç¬¦ï¼ˆåŒä¸€ä¸ªå­—ç¬¦é‡å¤3æ¬¡ä»¥ä¸Šï¼‰
            const repeatRegex = /(.)\1{2,}/;
            if (repeatRegex.test(name)) {
                return { valid: false, message: 'ç”¨æˆ·åä¸èƒ½åŒ…å«é‡å¤å­—ç¬¦' };
            }
            
            // é˜²æ­¢çº¯æ•°å­—
            const onlyNumbers = /^\d+$/;
            if (onlyNumbers.test(name)) {
                return { valid: false, message: 'ç”¨æˆ·åä¸èƒ½æ˜¯çº¯æ•°å­—' };
            }
            
            // å¸¸è§æ£ä¹±è¯æ±‡è¿‡æ»¤
            const badWords = ['admin', 'test', 'aaa', '111', '123', 'abc', 'xxx', 'qqq', 'www', 'asd', 'qwe', 'zxc', '123456', '000', '666', '888'];
            const lowerName = name.toLowerCase();
            if (badWords.some(word => lowerName === word)) {
                return { valid: false, message: 'è¯·ä½¿ç”¨çœŸå®çš„äººå' };
            }
            
            // å¿…é¡»åŒ…å«è‡³å°‘ä¸€ä¸ªä¸­æ–‡æˆ–è‹±æ–‡å­—æ¯
            const hasLetter = /[\u4e00-\u9fa5a-zA-Z]/;
            if (!hasLetter.test(name)) {
                return { valid: false, message: 'ç”¨æˆ·åå¿…é¡»åŒ…å«ä¸­æ–‡æˆ–è‹±æ–‡å­—æ¯' };
            }
            
            return { valid: true, message: '' };
        }

        // æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦å·²å­˜åœ¨
        async function checkUsernameExists(username) {
            try {
                const response = await fetch(`${SUPABASE_URL}/rest/v1/game_scores?player_name=eq.${encodeURIComponent(username)}&select=player_name`, {
                    headers: {
                        'apikey': SUPABASE_KEY
                    }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    return data.length > 0;
                }
            } catch (error) {
                console.error('æ£€æŸ¥ç”¨æˆ·åå¤±è´¥:', error);
            }
            return false;
        }

        // å®æ—¶éªŒè¯è¾“å…¥
        function validateNameInput(input) {
            const name = input.value.trim();
            const nameStatus = document.getElementById('nameStatus');
            
            // æ¸…é™¤ä¹‹å‰çš„å®šæ—¶å™¨
            clearTimeout(usernameCheckTimeout);
            
            // ç§»é™¤ä¸å…è®¸çš„å­—ç¬¦
            input.value = input.value.replace(/[^\u4e00-\u9fa5a-zA-Z0-9]/g, '');
            
            if (name.length === 0) {
                nameStatus.innerHTML = '';
                input.style.borderColor = '#e9ecef';
                input.style.backgroundColor = 'white';
                return;
            }
            
            // å®æ—¶æ ¼å¼éªŒè¯
            const validation = validateRealName(name);
            if (!validation.valid) {
                nameStatus.innerHTML = `<div class="name-taken">${validation.message}</div>`;
                input.style.borderColor = '#e74c3c';
                input.style.backgroundColor = '#fde8e8';
                return;
            }
            
            // æ ¼å¼æ­£ç¡®ï¼Œæ£€æŸ¥æ˜¯å¦é‡å¤
            nameStatus.innerHTML = '<div class="name-checking">æ£€æŸ¥ç”¨æˆ·åä¸­...</div>';
            input.style.borderColor = '#f39c12';
            input.style.backgroundColor = '#fff3cd';
            
            // é˜²æŠ–å¤„ç†ï¼Œé¿å…é¢‘ç¹è¯·æ±‚
            usernameCheckTimeout = setTimeout(async () => {
                const exists = await checkUsernameExists(name);
                if (exists) {
                    nameStatus.innerHTML = '<div class="name-taken">âŒ è¯¥ç”¨æˆ·åå·²è¢«ä½¿ç”¨ï¼Œè¯·æ¢ä¸€ä¸ª</div>';
                    input.style.borderColor = '#e74c3c';
                    input.style.backgroundColor = '#fde8e8';
                } else {
                    nameStatus.innerHTML = '<div class="name-available">âœ… ç”¨æˆ·åå¯ç”¨</div>';
                    input.style.borderColor = '#27ae60';
                    input.style.backgroundColor = '#e8f6f3';
                }
            }, 500);
        }
        
        // åˆ†äº«åŠŸèƒ½
        function shareApp() {
            const url = window.location.href;
            const title = '78é•¿åº¦æŸ¥è¯¢å™¨ - å¿«æ¥æµ‹è¯•ä½ çš„78é•¿åº¦ï¼';
            
            if (navigator.share) {
                navigator.share({
                    title: title,
                    url: url
                });
            } else {
                navigator.clipboard.writeText(url).then(() => {
                    alert('é“¾æ¥å·²å¤åˆ¶ï¼\n\nåˆ†äº«ç»™æœ‹å‹ï¼š' + url);
                });
            }
        }
        
        // æ»šåŠ¨åˆ°æ’è¡Œæ¦œä½ç½®
        function scrollToRanking() {
            document.getElementById('rankingSection').scrollIntoView({
                behavior: 'smooth'
            });
            loadRanking();
        }
        
        // æ»šåŠ¨åˆ°é¡¶éƒ¨
        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        // ç§‘å­¦è®¡ç®—78é•¿åº¦
        function calculateLength(height) {
            let result = ((height - 105) * 0.618 / 3.14);
            
            if (result < 0) {
                return null;
            }
            
            return result.toFixed(2);
        }

        // æ ¹æ®é•¿åº¦è·å–å°ºå¯¸æç¤º
        function getSizeTip(length) {
            if (length === null) {
                return { 
                    text: 'âŒ è®¡ç®—é”™è¯¯ï¼šè¯·è¾“å…¥åˆç†çš„èº«é«˜(105cmä»¥ä¸Š)', 
                    class: 'tip-error' 
                };
            }
            
            const numLength = parseFloat(length);
            
            if (numLength < 5) {
                return { 
                    text: 'ğŸ’ è¿·ä½ å°ºå¯¸ï¼Œè¶…çº§å¯çˆ±ï¼', 
                    class: 'tip-small' 
                };
            } else if (numLength < 10) {
                return { 
                    text: 'âœ¨ å°å·§ç²¾è‡´ï¼Œç‹¬å…·é­…åŠ›ï¼', 
                    class: 'tip-small' 
                };
            } else if (numLength < 15) {
                return { 
                    text: 'â­ æ ‡å‡†å°ºå¯¸ï¼Œæ°åˆ°å¥½å¤„ï¼', 
                    class: 'tip-medium' 
                };
            } else if (numLength < 20) {
                return { 
                    text: 'ğŸ”¥ é›„ä¼Ÿå£®è§‚ï¼Œæ°”åŠ¿éå‡¡ï¼', 
                    class: 'tip-medium' 
                };
            } else if (numLength < 50) {
                return { 
                    text: 'ğŸš€ è¶…çº§å°ºå¯¸ï¼Œéœ‡æ’¼å…¨åœºï¼', 
                    class: 'tip-large' 
                };
            } else {
                return { 
                    text: 'âš ï¸ è­¦å‘Šï¼æ£€æµ‹åˆ°è¶…å‡ºäººç±»ç†è§£èŒƒå›´çš„è¶…çº§é•¿åº¦ï¼', 
                    class: 'tip-large' 
                };
            }
        }

        // è®¡ç®—å¹¶ä¿å­˜åˆ°äº‘ç«¯
        async function calculateAndSave() {
            const username = document.getElementById('username').value.trim();
            const height = parseFloat(document.getElementById('height').value);
            
            // ä¸¥æ ¼çš„ç”¨æˆ·åéªŒè¯
            if (!username) {
                alert('è¯·è¾“å…¥ç”¨æˆ·å');
                return;
            }
            
            const validation = validateRealName(username);
            if (!validation.valid) {
                alert(validation.message);
                return;
            }
            
            // æœ€ç»ˆæ£€æŸ¥ç”¨æˆ·åæ˜¯å¦è¢«å ç”¨
            const exists = await checkUsernameExists(username);
            if (exists) {
                alert('è¯¥ç”¨æˆ·åå·²è¢«ä½¿ç”¨ï¼Œè¯·æ¢ä¸€ä¸ªåå­—');
                return;
            }
            
            // èº«é«˜éªŒè¯
            if (!height || height < 100 || height > 250) {
                alert('è¯·è¾“å…¥æ­£ç¡®çš„èº«é«˜ï¼ˆ100-250cmï¼‰');
                return;
            }
            
            const length = calculateLength(height);
            
            if (length === null) {
                document.getElementById('lengthDisplay').textContent = 'é”™è¯¯';
                document.getElementById('sizeTip').textContent = 'âŒ è¯·è¾“å…¥105cmä»¥ä¸Šçš„èº«é«˜';
                document.getElementById('sizeTip').className = 'size-tip tip-error';
                document.getElementById('rankInfo').innerHTML = '';
                alert('âŒ è®¡ç®—é”™è¯¯ï¼šè¯·è¾“å…¥105cmä»¥ä¸Šçš„èº«é«˜');
                return;
            }
            
            document.getElementById('lengthDisplay').textContent = length;
            
            const sizeTip = getSizeTip(length);
            const sizeTipElement = document.getElementById('sizeTip');
            sizeTipElement.textContent = sizeTip.text;
            sizeTipElement.className = 'size-tip ' + sizeTip.class;
            
            try {
                const response = await fetch(SUPABASE_URL + '/rest/v1/game_scores', {
                    method: 'POST',
                    headers: {
                        'apikey': SUPABASE_KEY,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        player_name: username,
                        score: parseFloat(length)
                    })
                });
                
                if (response.ok) {
                    const rankingData = await getRankingData();
                    const userRank = rankingData.findIndex(item => item.player_name === username) + 1;
                    const totalPlayers = rankingData.length;
                    const percentage = totalPlayers > 0 ? Math.round(((totalPlayers - userRank) / totalPlayers) * 1000) / 10 : 0;
                    
                    document.getElementById('rankInfo').innerHTML = `
                        <div style="background:#e8f6f3; padding:10px; border-radius:8px;">
                            <strong>ç¬¬${userRank}å</strong><br>
                            è¶…è¶Šäº†${percentage}%çš„å¥½å‹
                        </div>
                    `;
                    
                    alert(`ğŸ‰ ä¿å­˜æˆåŠŸï¼\n${username}ï¼š${length}cm\næ’åï¼šç¬¬${userRank}å`);
                    scrollToRanking();
                } else {
                    const error = await response.text();
                    if (error.includes('duplicate key')) {
                        alert('è¯¥ç”¨æˆ·åå·²è¢«ä½¿ç”¨ï¼Œè¯·æ¢ä¸€ä¸ªåå­—');
                    } else {
                        alert('ä¿å­˜å¤±è´¥ï¼Œä½†è®¡ç®—å®Œæˆ');
                    }
                }
            } catch (error) {
                alert('ç½‘ç»œé”™è¯¯ï¼Œä½†è®¡ç®—å®Œæˆ');
            }
        }

        // è·å–æ’è¡Œæ¦œæ•°æ®
        async function getRankingData() {
            try {
                const response = await fetch(SUPABASE_URL + '/rest/v1/game_scores?select=player_name,score&order=score.desc', {
                    headers: {
                        'apikey': SUPABASE_KEY
                    }
                });
                
                if (response.ok) {
                    return await response.json();
                }
            } catch (error) {
                console.error('è·å–æ’è¡Œæ¦œæ•°æ®å¤±è´¥:', error);
            }
            return [];
        }

        // æ˜¾ç¤ºç©å®¶è¯¦æƒ…
        function showPlayerDetail(playerName, score, rank) {
            alert(`ğŸ‘¤ ${playerName}\nğŸ† ç¬¬${rank}å\nğŸ“ ${score}cm`);
        }

        // åŠ è½½æ’è¡Œæ¦œ
        async function loadRanking() {
            const rankingList = document.getElementById('rankingList');
            const stats = document.getElementById('stats');
            
            rankingList.innerHTML = 'æ­£åœ¨åŠ è½½...';
            stats.innerHTML = 'åŠ è½½ä¸­...';
            
            try {
                const data = await getRankingData();
                
                stats.innerHTML = `å…± ${data.length} äººå‚ä¸ â€¢ æœ€é«˜è®°å½•: ${data.length > 0 ? data[0].score + 'cm' : 'æš‚æ— '}`;
                
                if (data.length > 0) {
                    let html = '';
                    data.forEach((item, index) => {
                        const medal = index === 0 ? 'ğŸ¥‡' : index === 1 ? 'ğŸ¥ˆ' : index === 2 ? 'ğŸ¥‰' : '';
                        const rankClass = index === 0 ? 'rank-1' : index === 1 ? 'rank-2' : index === 2 ? 'rank-3' : '';
                        
                        html += `
                            <div class="rank-card ${rankClass}" onclick="showPlayerDetail('${item.player_name}', ${item.score}, ${index + 1})">
                                <div class="rank-medal">${medal}</div>
                                <div class="rank-number">ç¬¬${index + 1}å</div>
                                <div class="player-name">${item.player_name}</div>
                                <div class="player-score">${item.score}cm</div>
                            </div>
                        `;
                    });
                    rankingList.innerHTML = html;
                } else {
                    rankingList.innerHTML = '<div style="text-align:center; padding:20px; color:#7f8c8d;">æš‚æ— æ•°æ®ï¼Œå¿«æ¥å½“ç¬¬ä¸€ä¸ªï¼</div>';
                }
            } catch (error) {
                rankingList.innerHTML = '<div style="text-align:center; padding:20px; color:#e74c3c;">ç½‘ç»œé”™è¯¯ï¼Œè¯·æ£€æŸ¥è¿æ¥</div>';
                stats.innerHTML = 'ç½‘ç»œé”™è¯¯';
            }
        }

        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨åŠ è½½æ’è¡Œæ¦œ
        window.onload = function() {
            loadRanking();
        };

        // æ¯30ç§’è‡ªåŠ¨åˆ·æ–°ä¸€æ¬¡æ’è¡Œæ¦œ
        setInterval(loadRanking, 30000);

        // èº«é«˜è¾“å…¥æ¡†å®æ—¶éªŒè¯
        document.getElementById('height').addEventListener('input', function() {
            const height = parseFloat(this.value);
            if (height && height < 105) {
                this.style.borderColor = '#e74c3c';
                this.style.backgroundColor = '#fde8e8';
            } else {
                this.style.borderColor = this.value ? '#27ae60' : '#e9ecef';
                this.style.backgroundColor = 'white';
            }
        });
        
        // é˜²æ­¢æ‰‹æœºç¼©æ”¾
        document.addEventListener('touchstart', function() {}, {passive: true});
    </script>
</body>
</html>
